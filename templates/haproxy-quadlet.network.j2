# HAProxy Blue-Green Network Configuration
[Unit]
Description=HAProxy Blue-Green Network
Documentation=man:podman-systemd.unit(5)

[Network]
NetworkName={{ podman_config.network_name }}
Subnet={{ podman_config.network_subnet | default('172.20.0.0/24', true) }}
Gateway={{ podman_config.network_gateway | default('172.20.0.1', true) }}
IPRange={{ podman_config.network_ip_range | default('172.20.0.0/24', true) }}
Driver=bridge

# DNS configuration
{% if podman_config.network_backend is defined and podman_config.network_backend != "cni" %}
{% if podman_config.network_dns is defined and podman_config.network_dns | d([], true) | length > 0 %}
{% for dns in podman_config.network_dns %}
{% if dns is defined and dns != "" %}
DNS={{ dns }}
{% endif %}
{% endfor %}
{% endif %}
{% endif %}

# Network options
Options=isolate=false

[Install]
WantedBy=multi-user.target default.target 
